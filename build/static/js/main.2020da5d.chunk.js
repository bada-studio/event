(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{259:function(e,t,n){e.exports=n(531)},265:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},390:function(e,t,n){},416:function(e,t){},419:function(e,t){},421:function(e,t){},497:function(e,t){},530:function(e,t,n){},531:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),i=n.n(o),c=(n(264),n(265),n(15)),s=n.n(c),u=n(25),l=n(37),m=n(38),h=n(106),p=n(100),f=n(105),d=n(79),g=(n(268),function(e){var t=e.children;return r.a.createElement("div",{className:"PostWrapper"},t)}),b=(n(269),function(){return r.a.createElement("div",{className:"Header"},"EOS Knights Item Airdrop!")}),v=n(539),k=n(104),E=n(540),w=n(538),y={sponsor:"EOS New York",sponsorLink:"https://www.eosnewyork.io/",sponsorImage:"https://eosknights.io/img/bp/eosnewyork.png",itemName:"Liberty Mace",itemGrade:"Rare",network:{blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",host:"api.eoseoul.io",port:443,protocol:"https"},url:{bastet:"https://bastet.eosknights.io/event/item/"}},x=(n(270),function(e){e.state;var t=e.inputDisabled,n=(e.gotThis,e.time),a=e.timeColor,o=e.imgUrl,i=e.onClickGet,c=e.onChangeName;return r.a.createElement("div",{className:"EventPost"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://eosknights.io"},r.a.createElement("img",{className:"SponsorIcon",src:"https://eosknights.io/img/icon.png"})),r.a.createElement("img",{className:"CrossIcon",src:"https://eosknights.io/img/cross.png"}),r.a.createElement("a",{href:y.sponsorLink},r.a.createElement("img",{className:"SponsorIcon",src:y.sponsorImage}))),r.a.createElement("h1",null,"Make your EOS Fun with ",y.sponsor,"!"),r.a.createElement("div",null,"Play EOS Knights with free ",y.itemName,"."),r.a.createElement(v.a,{centered:!0},r.a.createElement("div",{className:"ImgBox"},r.a.createElement("img",{src:o,className:"ItemImage"}),r.a.createElement(k.a,{basic:!0,color:a},n)),r.a.createElement(v.a.Content,null,r.a.createElement(v.a.Header,null,y.itemName),r.a.createElement(v.a.Meta,null,r.a.createElement("span",{className:"date"},y.itemGrade))),r.a.createElement(v.a.Content,{extra:!0},r.a.createElement(E.a,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"EOS Account Id",onChange:c,disabled:t,action:{color:"teal",content:"Get",onClick:i}}))),r.a.createElement(w.a,null,r.a.createElement(w.a.Item,null,"One account can get only one ",y.itemName),r.a.createElement(w.a.Item,null,"Crafting ",y.itemName," is almost impossible."),r.a.createElement(w.a.Item,null,"You can trade the ",y.itemName," and change it into magic waters."),r.a.createElement(w.a.Item,null,"If you see error message, you should download the game with below links.")),r.a.createElement("div",{className:"Link"},r.a.createElement("a",{href:"https://eosknights.io/app/android/en/"},r.a.createElement("img",{className:"SponsorIcon",src:"https://eosknights.io/img/icon-google.png"})),r.a.createElement("a",{href:"https://eosknights.io/app/ios/en/"},r.a.createElement("img",{className:"CrossIcon",src:"https://eosknights.io/img/icon-apple.png"})),r.a.createElement("a",{href:"https://game.eosknights.io/"},r.a.createElement("img",{className:"SponsorIcon",src:"https://eosknights.io/img/icon-chrome.png"}))))}),C=n(541),O=n(537),S=(n(390),function(e){var t=e.active;return r.a.createElement("div",null,t?r.a.createElement("div",{className:"SimpleLoader"},r.a.createElement(C.a,{active:t},r.a.createElement(O.a,null))):null)}),N=n(80),I=n.n(N),j=function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,[{key:"getTableUrl",value:function(){var e=y.network,t=e.protocol,n=e.host,a=e.port;return"".concat(t,"://").concat(n,":").concat(a,"/v1/chain/get_table_rows")}},{key:"readTable",value:function(){var e=Object(u.a)(s.a.mark(function e(t,n){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getTableUrl(),r={scope:t,code:t,table:n,json:!0},e.prev=2,e.next=5,I.a.post(a,r,{headers:{"content-type":"text/plain"}});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"readTableRow",value:function(){var e=Object(u.a)(s.a.mark(function e(t,n,a){var r,o,i,c,u=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>3&&void 0!==u[3]?u[3]:"name",o=this.getTableUrl(),i={scope:t,code:t,table:n,lower_bound:a,upper_bound:null,key_type:r,index_position:1,limit:1,json:!0},e.prev=3,e.next=6,I.a.post(o,i,{headers:{"content-type":"text/plain"}});case 6:if(null!==(c=e.sent).data&&null!==c.data.rows&&0!==c.data.rows.length){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",c.data.rows[0]);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[3,12]])}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),D=n(41),T=n.n(D),R=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this))).fetchItemEventInfo=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({fetching:!0}),e.next=3,n.chain.readTable("eosknightsio","itemevt");case 3:t=e.sent,n.setState({info:t.data.rows[0],fetching:!1,imgUrl:"https://eosknights.io/img/resource/big/item/item_".concat(t.data.rows[0].code,".png")}),n.updateReaminText(),n.timer=setInterval(function(){return n.updateReaminText()},1e3);case 7:case"end":return e.stop()}},e)})),n.handleChange=function(e){n.setState({name:e.target.value})},n.onClickGet=Object(u.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("RUN"===n.state.state){e.next=2;break}return e.abrupt("return");case 2:if(n.state.name){e.next=5;break}return T.a.error("Please fill out your eos accout id first",{position:"top-right",effect:"slide",beep:!1,timeout:3e3}),e.abrupt("return");case 5:return n.setState({fetching:!0}),e.next=8,n.chain.readTableRow("eosknightsio","player",n.state.name);case 8:return t=e.sent,e.next=11,n.chain.readTableRow("eosknightsio","playerv2",n.state.name);case 11:if(a=e.sent,n.setState({fetching:!1}),null!=t&&t.owner===n.state.name){e.next=16;break}return T.a.error("Please sign up the EOS Knights first!<br/>Download EOS Knights with blow link.",{position:"top-right",effect:"slide",html:!0,beep:!1,timeout:3e3}),e.abrupt("return");case 16:if(null===a||a.owner!==n.state.name||a.itemevt!==n.state.info.key){e.next=19;break}return T.a.error("You've already got '".concat(y.itemName,"'"),{position:"top-right",effect:"slide",beep:!1,timeout:3e3}),e.abrupt("return");case 19:return e.next=21,n.getEventItem();case 21:case"end":return e.stop()}},e)})),n.state={fetching:!1,info:{id:0,code:0,from:0,duration:0},name:"",imgUrl:"",time:"CLOSED",timeColor:"grey",state:"CLOSED",inputDisabled:!0},n.chain=new j(y.network),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"getRemainText",value:function(e){var t=String(Math.floor(e/3600)).padStart(2,"0"),n=String(Math.floor(e/60)%60).padStart(2,"0"),a=String(e%60).padStart(2,"0");return"".concat(t,":").concat(n,":").concat(a)}},{key:"updateReaminText",value:function(){var e=this.state.info,t=e.from,n=t+e.duration,a=Math.floor(Date.now()/1e3);if(n<a)this.setState({time:"CLOSED",timeColor:"grey",state:"CLOSED",inputDisabled:!0});else if(a<t){var r=this.getRemainText(t-a);this.setState({time:"-".concat(r),timeColor:"grey",state:"READY",inputDisabled:!0})}else{var o=this.getRemainText(n-a);this.setState({time:"".concat(o),timeColor:"green",state:"RUN",inputDisabled:!1})}}},{key:"getEventItem",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({fetching:!0}),t=y.url.bastet+this.state.name,e.next=4,I.a.get(t).then(function(e){T.a.success("You got a '".concat(y.itemName,"'!"),{position:"top-right",effect:"slide",beep:!1,timeout:7e3})}).catch(function(e){T.a.error("Can not get a '".concat(y.itemName,"'"),{position:"top-right",effect:"slide",beep:!1,timeout:3e3})});case 4:this.setState({fetching:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchItemEventInfo()}},{key:"render",value:function(){var e=this.state,t=e.fetching,n=e.time,a=e.timeColor,o=e.imgUrl,i=e.inputDisabled;return r.a.createElement(g,null,r.a.createElement(x,{imgUrl:o,time:n,timeColor:a,inputDisabled:i,onClickGet:this.onClickGet,onChangeName:this.handleChange}),r.a.createElement(S,{active:t}))}}]),t}(a.Component),U=n(33),L=n.n(U),G=n(247),M=n.n(G),_=n(248),A=n.n(_),P=function(){function e(t,n){Object(l.a)(this,e),this.appName=n,L.a.plugins(new M.a),this.account=null,this.eosOptions={expireInSeconds:60},this.isConnected=!1,this.contract=null,this.eosApi=null,this.net=L.a.Network.fromJson(t),this.auth=null}return Object(m.a)(e,[{key:"connect",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.net,e.next=3,L.a.connect(this.appName,{network:t});case 3:if(this.isConnected=e.sent,this.isConnected){e.next=6;break}return e.abrupt("return",console.error("connection failed"));case 6:return this.eosApi=L.a.eos(this.net,A.a),e.next=9,L.a.login().then(function(e){if(!e)return console.error("no identity");n.account=L.a.account("eos"),n.auth={authorization:["".concat(n.account.name,"@").concat(n.account.authority)]}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadContract",value:function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.eosApi.contract(t);case 2:this.contract=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=(n(528),n(529),n(530),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={},n.scatter=new P(y.network,"EK Event"),n.onClick=n.onClick.bind(Object(d.a)(Object(d.a)(n))),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"onClick",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scatter,e.next=3,t.connect();case 3:return e.next=5,t.loadContract("eosknightsio");case 5:return e.next=7,t.contract.signup(t.account.name,t.auth);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(R,null),r.a.createElement(T.a,{stack:{limit:3}}))}}]),t}(a.Component));i.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.2020da5d.chunk.js.map